============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.1, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /home/user/SpeechToText
configfile: pyproject.toml
testpaths: .
plugins: cov-7.0.0
collecting ... collected 17 items

test_dictation.py::TestAudioProcessing::test_audio_chunk_concatenation PASSED [  5%]
test_dictation.py::TestAudioProcessing::test_empty_audio_frames PASSED   [ 11%]
test_dictation.py::TestAudioProcessing::test_wav_buffer_creation PASSED  [ 17%]
test_dictation.py::TestHotkeyLogic::test_both_keys_pressed FAILED        [ 23%]
test_dictation.py::TestHotkeyLogic::test_key_release_detection FAILED    [ 29%]
test_dictation.py::TestHotkeyLogic::test_single_key_not_sufficient FAILED [ 35%]
test_dictation.py::TestThreadSafety::test_audio_frames_list_append PASSED [ 41%]
test_dictation.py::TestThreadSafety::test_recording_flag_thread_safety PASSED [ 47%]
test_dictation.py::TestModelConfiguration::test_gpu_model_fallback_to_cpu FAILED [ 52%]
test_dictation.py::TestModelConfiguration::test_gpu_model_success FAILED [ 58%]
test_dictation.py::TestTextProcessing::test_empty_transcription PASSED   [ 64%]
test_dictation.py::TestTextProcessing::test_segment_joining PASSED       [ 70%]
test_dictation.py::TestTextProcessing::test_text_stripping PASSED        [ 76%]
test_dictation.py::TestAudioCallbackBehavior::test_callback_continues_when_not_recording FAILED [ 82%]
test_dictation.py::TestAudioCallbackBehavior::test_callback_continues_when_recording FAILED [ 88%]
test_dictation.py::TestIntegrationScenarios::test_multiple_recording_sessions PASSED [ 94%]
test_dictation.py::TestIntegrationScenarios::test_recording_lifecycle PASSED [100%]

=================================== FAILURES ===================================
____________________ TestHotkeyLogic.test_both_keys_pressed ____________________

self = <test_dictation.TestHotkeyLogic testMethod=test_both_keys_pressed>

    def test_both_keys_pressed(self):
        """Test that recording starts only when both keys are pressed."""
>       from pynput import keyboard
E       ModuleNotFoundError: No module named 'pynput'

test_dictation.py:81: ModuleNotFoundError
__________________ TestHotkeyLogic.test_key_release_detection __________________

self = <test_dictation.TestHotkeyLogic testMethod=test_key_release_detection>

    def test_key_release_detection(self):
        """Test that key release is properly detected."""
>       from pynput import keyboard
E       ModuleNotFoundError: No module named 'pynput'

test_dictation.py:105: ModuleNotFoundError
________________ TestHotkeyLogic.test_single_key_not_sufficient ________________

self = <test_dictation.TestHotkeyLogic testMethod=test_single_key_not_sufficient>

    def test_single_key_not_sufficient(self):
        """Test that single key press doesn't trigger recording."""
>       from pynput import keyboard
E       ModuleNotFoundError: No module named 'pynput'

test_dictation.py:96: ModuleNotFoundError
____________ TestModelConfiguration.test_gpu_model_fallback_to_cpu _____________
/usr/lib/python3.11/unittest/mock.py:1375: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.11/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1357: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/contextlib.py:517: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:700: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    #!/usr/bin/env python3
    """
    Push-to-Talk Speech-to-Text Dictation Tool - Enhanced Edition
    
    A feature-rich dictation tool with configurable hotkeys, audio feedback,
    punctuation commands, continuous mode, and system tray integration.
    
    Architecture:
    - Module 1: Configuration Manager
    - Module 2: Global Hotkey Listener (pynput)
    - Module 3: Audio Capture with Feedback (PyAudio)
    - Module 4: STT Engine (faster-whisper)
    - Module 5: Text Processing (punctuation, vocabulary)
    - Module 6: Text Injection (pynput)
    - Module 7: System Tray Icon (pystray)
    - Module 8: Wake Word Detection (optional)
    """
    
    import io
    import logging
    import os
    import platform
    import re
    import sys
    import threading
    import time
    import wave
    from typing import Dict, List, Optional, Set
    
>   import numpy as np
E   ModuleNotFoundError: No module named 'numpy'

dictation.py:30: ModuleNotFoundError
________________ TestModelConfiguration.test_gpu_model_success _________________
/usr/lib/python3.11/unittest/mock.py:1375: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.11/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1357: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/contextlib.py:517: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:700: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    #!/usr/bin/env python3
    """
    Push-to-Talk Speech-to-Text Dictation Tool - Enhanced Edition
    
    A feature-rich dictation tool with configurable hotkeys, audio feedback,
    punctuation commands, continuous mode, and system tray integration.
    
    Architecture:
    - Module 1: Configuration Manager
    - Module 2: Global Hotkey Listener (pynput)
    - Module 3: Audio Capture with Feedback (PyAudio)
    - Module 4: STT Engine (faster-whisper)
    - Module 5: Text Processing (punctuation, vocabulary)
    - Module 6: Text Injection (pynput)
    - Module 7: System Tray Icon (pystray)
    - Module 8: Wake Word Detection (optional)
    """
    
    import io
    import logging
    import os
    import platform
    import re
    import sys
    import threading
    import time
    import wave
    from typing import Dict, List, Optional, Set
    
>   import numpy as np
E   ModuleNotFoundError: No module named 'numpy'

dictation.py:30: ModuleNotFoundError
_____ TestAudioCallbackBehavior.test_callback_continues_when_not_recording _____
/usr/lib/python3.11/unittest/mock.py:1375: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.11/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1357: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/contextlib.py:517: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:700: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    #!/usr/bin/env python3
    """
    Push-to-Talk Speech-to-Text Dictation Tool - Enhanced Edition
    
    A feature-rich dictation tool with configurable hotkeys, audio feedback,
    punctuation commands, continuous mode, and system tray integration.
    
    Architecture:
    - Module 1: Configuration Manager
    - Module 2: Global Hotkey Listener (pynput)
    - Module 3: Audio Capture with Feedback (PyAudio)
    - Module 4: STT Engine (faster-whisper)
    - Module 5: Text Processing (punctuation, vocabulary)
    - Module 6: Text Injection (pynput)
    - Module 7: System Tray Icon (pystray)
    - Module 8: Wake Word Detection (optional)
    """
    
    import io
    import logging
    import os
    import platform
    import re
    import sys
    import threading
    import time
    import wave
    from typing import Dict, List, Optional, Set
    
>   import numpy as np
E   ModuleNotFoundError: No module named 'numpy'

dictation.py:30: ModuleNotFoundError
_______ TestAudioCallbackBehavior.test_callback_continues_when_recording _______
/usr/lib/python3.11/unittest/mock.py:1375: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.11/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1357: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/contextlib.py:517: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:700: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    #!/usr/bin/env python3
    """
    Push-to-Talk Speech-to-Text Dictation Tool - Enhanced Edition
    
    A feature-rich dictation tool with configurable hotkeys, audio feedback,
    punctuation commands, continuous mode, and system tray integration.
    
    Architecture:
    - Module 1: Configuration Manager
    - Module 2: Global Hotkey Listener (pynput)
    - Module 3: Audio Capture with Feedback (PyAudio)
    - Module 4: STT Engine (faster-whisper)
    - Module 5: Text Processing (punctuation, vocabulary)
    - Module 6: Text Injection (pynput)
    - Module 7: System Tray Icon (pystray)
    - Module 8: Wake Word Detection (optional)
    """
    
    import io
    import logging
    import os
    import platform
    import re
    import sys
    import threading
    import time
    import wave
    from typing import Dict, List, Optional, Set
    
>   import numpy as np
E   ModuleNotFoundError: No module named 'numpy'

dictation.py:30: ModuleNotFoundError
=========================== short test summary info ============================
FAILED test_dictation.py::TestHotkeyLogic::test_both_keys_pressed - ModuleNot...
FAILED test_dictation.py::TestHotkeyLogic::test_key_release_detection - Modul...
FAILED test_dictation.py::TestHotkeyLogic::test_single_key_not_sufficient - M...
FAILED test_dictation.py::TestModelConfiguration::test_gpu_model_fallback_to_cpu
FAILED test_dictation.py::TestModelConfiguration::test_gpu_model_success - Mo...
FAILED test_dictation.py::TestAudioCallbackBehavior::test_callback_continues_when_not_recording
FAILED test_dictation.py::TestAudioCallbackBehavior::test_callback_continues_when_recording
========================= 7 failed, 10 passed in 0.81s =========================
Exit code: 
